## ADDED Requirements

### Requirement: 建立合約
系統 SHALL 允許使用者為客戶建立合約，包含合約類型（年約/季約/其他）、起始日期、結束日期。

#### Scenario: 成功建立年約
- **WHEN** 使用者選擇客戶並設定年約期限
- **THEN** 系統建立合約並關聯至該客戶

### Requirement: 管理合約品項價格
系統 SHALL 允許在合約中設定多個品項及其單價。

#### Scenario: 新增合約品項
- **WHEN** 使用者在合約中新增品項與單價
- **THEN** 系統儲存品項價格並於交易時自動帶入

#### Scenario: 編輯合約品項價格
- **WHEN** 使用者修改合約內品項的單價
- **THEN** 系統更新價格，新交易使用新價格

### Requirement: 合約狀態管理
系統 SHALL 自動判斷合約狀態：有效、即將到期（30天內）、已過期。

#### Scenario: 合約即將到期
- **WHEN** 合約結束日期在 30 天內
- **THEN** 系統將合約標示為「即將到期」

### Requirement: 合約到期提醒
系統 SHALL 在合約到期前 30 天發送提醒通知給內部人員。

#### Scenario: 發送到期提醒
- **WHEN** 合約進入到期前 30 天
- **THEN** 系統發送通知至內部人員

### Requirement: 查詢合約歷史
系統 SHALL 保留客戶的合約歷史紀錄供查詢。

#### Scenario: 查看客戶合約歷史
- **WHEN** 使用者查看客戶詳情
- **THEN** 系統顯示該客戶所有合約（含過期）
